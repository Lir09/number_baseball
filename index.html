<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ€ì‹  ë§¤ì  - ì˜¨ë¼ì¸ ì‡¼í•‘ëª°</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Noto Sans KR', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background-color: #fafafa;
    color: #222;
    line-height: 1.6;
}

.header {
    background: #ffffff;
    border-bottom: 1px solid #eaeaea;
    padding: 1rem 0;
    box-shadow: none;
}

.container {
    max-width: 1140px;
    margin: 0 auto;
    padding: 0 24px;
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.logo {
    font-size: 24px;
    font-weight: 600;
    color: #111;
    text-decoration: none;
    letter-spacing: 0.04em;
}

.cart-icon {
    background: #f0f0f0;
    padding: 10px 16px;
    border-radius: 9999px;
    cursor: pointer;
    transition: background-color 0.25s ease;
    font-size: 1.2rem;
    color: #555;
}

.cart-icon:hover {
    background: #e0e0e0;
}

.main-content {
    padding: 3rem 0;
}

.section {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgb(0 0 0 / 0.05);
    margin-bottom: 2.5rem;
    overflow: hidden;
}

.section-header {
    background: #f8f8f8;
    color: #333;
    padding: 1.25rem 2rem;
    font-size: 1.25rem;
    font-weight: 600;
    user-select: none;
    border-bottom: 1px solid #eaeaea;
}

.section-content {
    padding: 2rem;
}

.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.8rem;
}

.product-card {
    border-radius: 12px;
    background: #fff;
    border: 1px solid #eee;
    cursor: pointer;
    transition: box-shadow 0.3s ease, transform 0.3s ease;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.product-card:hover {
    box-shadow: 0 8px 20px rgb(0 0 0 / 0.08);
    transform: translateY(-4px);
}

.product-image {
    height: 180px;
    background: #f9f9f9;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    color: #bbb;
    user-select: none;
}

.product-info {
    padding: 1.2rem 1.5rem;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.product-name {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 0.4rem;
    color: #222;
}

.product-price {
    font-size: 1.2rem;
    font-weight: 700;
    color: #444;
    margin-bottom: 1rem;
}

.btn {
    background: linear-gradient(135deg, #757575 0%, #424242 100%);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 1rem;
    font-weight: bold;
    width: 100%;
    transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
}

.btn:hover {
    background-color: #616161;
    transform: scale(1.03);
    box-shadow: 0 8px 15px rgba(97, 97, 97, 0.5);
}

.btn-secondary {
    background: #f5f5f5;
    color: #222;
}

.btn-secondary:hover {
    background: #ddd;
}

.cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #eee;
    font-size: 1.1rem;
    color: #444;
}

.cart-item:last-child {
    border-bottom: none;
}

.cart-total {
    background: #222;
    color: white;
    padding: 1.5rem 2rem;
    margin-top: 1.5rem;
    border-radius: 12px;
    text-align: center;
    font-size: 1.25rem;
    font-weight: 700;
}

.order-form {
    display: grid;
    gap: 1.5rem;
}

.form-group {
    display: flex;
    flex-direction: column;
}

.form-label {
    font-weight: 600;
    margin-bottom: 0.4rem;
    color: #333;
    font-size: 1rem;
}

.form-input {
    padding: 12px 16px;
    border: 1.5px solid #ddd;
    border-radius: 10px;
    font-size: 1rem;
    transition: border-color 0.3s ease;
    color: #222;
}

.form-input::placeholder {
    color: #aaa;
}

.form-input:focus {
    outline: none;
    border-color: #222;
}

.payment-methods {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
}

.payment-method {
    border: 1.5px solid #ddd;
    border-radius: 12px;
    padding: 1rem 1.5rem;
    text-align: center;
    cursor: pointer;
    transition: border-color 0.3s ease, background-color 0.3s ease;
    user-select: none;
    color: #333;
    background: #fafafa;
}

.payment-method:hover {
    border-color: #222;
    background: #f0f0f0;
}

.payment-method.selected {
    border-color: #222;
    background: #e8e8e8;
    font-weight: 600;
}

.upload-area {
    border: 2px dashed #bbb;
    border-radius: 12px;
    padding: 2rem;
    text-align: center;
    background: #fafafa;
    cursor: pointer;
    transition: background-color 0.3s ease, border-color 0.3s ease;
    user-select: none;
    color: #888;
}

.upload-area:hover {
    background: #f0f0f0;
    border-color: #888;
}

.upload-area.dragover {
    background: #e1e1e1;
    border-color: #555;
}

.hidden {
    display: none;
}

.success-message {
    background: #2ecc71;
    color: white;
    padding: 1.5rem 2rem;
    border-radius: 12px;
    text-align: center;
    margin-top: 1rem;
    font-weight: 600;
}

.bank-info {
    background: #f9f9f9;
    border-left: 4px solid #222;
    padding: 1rem 1.5rem;
    border-radius: 0 10px 10px 0;
    margin: 1.5rem 0;
    color: #555;
}

.preview-image {
    max-width: 200px;
    max-height: 200px;
    border-radius: 12px;
    margin-top: 1rem;
    object-fit: cover;
    box-shadow: 0 4px 12px rgb(0 0 0 / 0.05);
}

@media (max-width: 768px) {
    .products-grid {
        grid-template-columns: 1fr;
    }

    .payment-methods {
        grid-template-columns: 1fr;
    }

    .section-content {
        padding: 1.5rem 1.5rem;
    }
}




    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo">ğŸ›’ ëŒ€ì‹  ë§¤ì </a>
<div id="cart-icon" class="cart-icon" onclick="showCart()"> ğŸ›ï¸ ì¥ë°”êµ¬ë‹ˆ (<span id="cart-count">0</span>) </div>

            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <!-- ìƒí’ˆ ëª©ë¡ ì„¹ì…˜ -->
            <div id="products-section" class="section">
                <!-- ìƒí’ˆ ì„¤ëª… í‘œì‹œ ì˜ì—­ -->
<div id="product-detail" class="section hidden">
  <div class="section-header">
    ìƒí’ˆ ì„¤ëª…
  </div>
  <div class="section-content" id="product-description">
    <!-- ì—¬ê¸° ìƒí’ˆ ì„¤ëª…ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
  </div>
  <button class="btn btn-secondary" onclick="hideProductDetail()" style="margin-top: 1rem;">
    ë‹«ê¸°
  </button>
</div>
                <div class="section-header">
                    ğŸ”¥ ì¸ê¸° ìƒí’ˆ
                </div>
                <div class="section-content">
                    <div class="products-grid" id="products-grid">
                        <!-- ìƒí’ˆë“¤ì´ JavaScriptë¡œ ë™ì  ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>

            <!-- ì¥ë°”êµ¬ë‹ˆ ì„¹ì…˜ -->
            <div id="cart-section" class="section hidden">
                <div class="section-header">
                    ğŸ›ï¸ ì¥ë°”êµ¬ë‹ˆ
                </div>
                <div class="section-content">
                    <div id="cart-items"></div>
                    <div id="cart-total" class="cart-total hidden">
                        ì´ í•©ê³„: <span id="total-amount">0</span>ì›
                    </div>
                    <button class="btn btn-secondary" onclick="showOrderForm()" id="order-btn" style="margin-top: 1rem; display: none;">
                        ì£¼ë¬¸í•˜ê¸°
                    </button>
                    <button class="btn" onclick="showProducts()" style="margin-top: 1rem;">
                        ì‡¼í•‘ ê³„ì†í•˜ê¸°
                    </button>
                </div>
            </div>

            <!-- ì£¼ë¬¸ í¼ ì„¹ì…˜ -->
            <div id="order-section" class="section hidden">
                <div class="section-header">
                    ğŸ“ ì£¼ë¬¸ ì •ë³´ ì…ë ¥
                </div>
                <div class="section-content">
                    <form class="order-form" id="order-form">
                        <div class="form-group">
                            <label class="form-label">ì´ë¦„</label>
                            <input type="text" class="form-input" id="customer-name" placeholder="ì£¼ë¬¸ì ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ì „í™”ë²ˆí˜¸</label>
                            <input type="tel" class="form-input" id="customer-phone" placeholder="010-1234-5678" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">xí•™ë…„ xë°˜</label>
                            <input type="text" class="form-input" id="customer-address" placeholder="ìƒì„¸ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ê²°ì œ ë°©ë²• ì„ íƒ</label>
                            <div class="payment-methods">
                                <div class="payment-method" onclick="selectPayment('bank')">
                                    ğŸ¦<br>ê³„ì¢Œì´ì²´
                                </div>
                                <div class="payment-method selected" onclick="selectPayment('bank')">
                                    ğŸ¦<br>ê³„ì¢Œì´ì²´
                                </div>
                                <div class="payment-method" onclick="selectPayment('bank')">
                                    ğŸ¦<br>ê³„ì¢Œì´ì²´
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn">ì£¼ë¬¸ ì™„ë£Œ</button>
                    </form>
                </div>
            </div>

            <!-- ê²°ì œ í™•ì¸ ì„¹ì…˜ -->
            <div id="payment-section" class="section hidden">
                <div class="section-header">
                    ğŸ’° ê³„ì¢Œì´ì²´ ê²°ì œ í™•ì¸
                </div>
                <div class="section-content">
                    <div class="bank-info">
                        <h3>ì…ê¸ˆ ê³„ì¢Œ ì •ë³´</h3>
                        <p><strong>ì€í–‰:</strong> scì œì¼ì€í–‰</p>
                        <p><strong>ê³„ì¢Œë²ˆí˜¸:</strong> 123456-78-901234</p>
                        <p><strong>ì˜ˆê¸ˆì£¼:</strong> ê¹€ê°€ë¹ˆ</p>
                        <p><strong>ì…ê¸ˆ ê¸ˆì•¡:</strong> <span id="payment-amount">0</span>ì›</p>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ì…ê¸ˆìëª…</label>
                        <input type="text" class="form-input" id="depositor-name" placeholder="ì…ê¸ˆí•˜ì‹  ë¶„ì˜ ì„±í•¨ì„ ì…ë ¥í•˜ì„¸ìš”" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ì…ê¸ˆ í™•ì¸ ì¦ë¹™ì„œë¥˜ ì—…ë¡œë“œ</label>
                        <div class="upload-area" onclick="document.getElementById('receipt-upload').click()">
                            <p>ğŸ“ í´ë¦­í•˜ì—¬ íŒŒì¼ì„ ì„ íƒí•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
                            <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">
                                (JPG, PNG, PDF íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥)
                            </p>
                        </div>
                        <input type="file" id="receipt-upload" class="hidden" accept="image/*,.pdf" onchange="handleFileUpload(event)">
                        <div id="upload-preview"></div>
                    </div>
                    
                    <button class="btn" onclick="confirmPayment()">ê²°ì œ í™•ì¸ ì™„ë£Œ</button>
                    <button class="btn btn-secondary" onclick="showOrderForm()" style="margin-top: 1rem;">ì´ì „ìœ¼ë¡œ</button>
                </div>
            </div>

            <!-- ì£¼ë¬¸ ì™„ë£Œ ì„¹ì…˜ -->
            <div id="success-section" class="section hidden">
                <div class="section-header">
                    âœ… ì£¼ë¬¸ ì™„ë£Œ
                </div>
                <div class="section-content">
                    <div class="success-message">
                        <h2>ğŸ‰ ì£¼ë¬¸ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h2>
                        <p>ì£¼ë¬¸ë²ˆí˜¸: <strong id="order-number"></strong></p>
                        <p>ê²°ì œ í™•ì¸ í›„ ë°°ì†¡ì„ ì‹œì‘í•©ë‹ˆë‹¤.</p>
                        <p>ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>
                    </div>
                    <button class="btn" onclick="resetOrder()" style="margin-top: 2rem;">ìƒˆë¡œìš´ ì£¼ë¬¸í•˜ê¸°</button>
                </div>
            </div>
        </div>
    </main>

    <script>// ì „ì—­ ë³€ìˆ˜



let cart = [];
let selectedPayment = 'bank';
let orderData = {};

// ìƒí’ˆ ë°ì´í„°
const products = [
    { id: 1, name: "ì˜ˆì‹œ 1", price: 899000, emoji: "ğŸ“±" },
    { id: 2, name: "ì˜ˆì‹œ 2", price: 329000, emoji: "ğŸ§" },
    { id: 3, name: "ì˜ˆì‹œ 3", price: 1299000, emoji: "ğŸ’»" },
    { id: 4, name: "ì˜ˆì‹œ 4", price: 129000, emoji: "ğŸ‘Ÿ" },
    { id: 5, name: "ì˜ˆì‹œ 5", price: 89000, emoji: "ğŸ”Š" },
    { id: 6, name: "ì˜ˆì‹œ 6", price: 45000, emoji: "ğŸ”Œ" },
    { id: 7, name: "ì˜ˆì‹œ 7", price: 299000, emoji: "âŒš" },
    { id: 8, name: "ì˜ˆì‹œ 8", price: 159000, emoji: "âŒ¨ï¸" }
];

// í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
    displayProducts();
    setupDragAndDrop();
    updateCartDisplay();
    selectPayment('bank');
});

// ìƒí’ˆ ëª©ë¡ í‘œì‹œ
function displayProducts() {
    const grid = document.getElementById('products-grid');
    grid.innerHTML = '';
    
    products.forEach(product => {
        const productCard = document.createElement('div');
        productCard.className = 'product-card';
        productCard.innerHTML = `
            <div class="product-image">${product.emoji}</div>
            <div class="product-info">
                <div class="product-name">${product.name}</div>
                <div class="product-price">${product.price.toLocaleString()}ì›</div>
                <button class="btn" onclick="addToCart(${product.id}, event)">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
                <button class="btn btn-info" onclick="showProductDescription(${product.id})" style="margin-top: 0.5rem;">ìƒí’ˆ ì„¤ëª…</button>
            </div>
        `;
        grid.appendChild(productCard);
    });
}

// ìƒí’ˆ ì„¤ëª… íŒì—…
function showProductDescription(productId) {
    const product = products.find(p => p.id === productId);
    if (!product) return;

    alert(`${product.name} ì„¤ëª…:\n\nì´ ìƒí’ˆì€ ë§¤ìš° í›Œë¥­í•œ ì œí’ˆì…ë‹ˆë‹¤!\nê°€ê²©: ${product.price.toLocaleString()}ì›`);
}

// "ë‹´ê¸° ì™„ë£Œ" ì•Œë¦¼ í† ìŠ¤íŠ¸ í‘œì‹œ
function showToast(message) {
    let toast = document.createElement('div');
    toast.textContent = message;
    toast.style.position = 'fixed';
    toast.style.bottom = '80px';
    toast.style.left = '50%';
    toast.style.transform = 'translateX(-50%)';
    toast.style.background = 'rgba(0,0,0,0.8)';
    toast.style.color = 'white';
    toast.style.padding = '10px 20px';
    toast.style.borderRadius = '20px';
    toast.style.fontSize = '1rem';
    toast.style.zIndex = 2000;
    toast.style.opacity = '0';
    toast.style.transition = 'opacity 0.3s ease';

    document.body.appendChild(toast);

    // ì„œì„œíˆ ë‚˜íƒ€ë‚˜ê¸°
    requestAnimationFrame(() => {
        toast.style.opacity = '1';
    });

    // 1.5ì´ˆ í›„ ì„œì„œíˆ ì‚¬ë¼ì§€ê³  ì œê±°
    setTimeout(() => {
        toast.style.opacity = '0';
        toast.addEventListener('transitionend', () => {
            toast.remove();
        });
    }, 1500);
}

// ìƒí’ˆ ì´ëª¨ì§€ ë³µì‚¬í•´ì„œ ì¥ë°”êµ¬ë‹ˆë¡œ ë‚ ì•„ê°€ëŠ” ì• ë‹ˆë©”ì´ì…˜
function animateToCart(button, emoji) {
    const btnRect = button.getBoundingClientRect();
    const cartIcon = document.getElementById('cart-icon');
    if (!cartIcon) return;  // ì•„ì´ì½˜ ì—†ìœ¼ë©´ ê·¸ëƒ¥ ì¢…ë£Œ
    const cartRect = cartIcon.getBoundingClientRect();

    const flyingEmoji = document.createElement('div');
    flyingEmoji.textContent = emoji;
    flyingEmoji.style.position = 'fixed';
    flyingEmoji.style.left = btnRect.left + 'px';
    flyingEmoji.style.top = btnRect.top + 'px';
    flyingEmoji.style.fontSize = '2.5rem';
    flyingEmoji.style.pointerEvents = 'none';
    flyingEmoji.style.zIndex = 1000;
    flyingEmoji.style.transition = 'all 0.8s ease-in-out';
    flyingEmoji.style.userSelect = 'none';

    document.body.appendChild(flyingEmoji);

    requestAnimationFrame(() => {
        flyingEmoji.style.left = (cartRect.left + cartRect.width / 2) + 'px';
        flyingEmoji.style.top = (cartRect.top + cartRect.height / 2) + 'px';
        flyingEmoji.style.transform = 'scale(0.3)';
        flyingEmoji.style.opacity = '0.5';
    });

    flyingEmoji.addEventListener('transitionend', () => {
        flyingEmoji.remove();
        updateCartDisplay();
    });
}

// ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆ ì¶”ê°€ (ì• ë‹ˆë©”ì´ì…˜ + í† ìŠ¤íŠ¸ í¬í•¨)
function addToCart(productId, event) {
    const product = products.find(p => p.id === productId);
    const existingItem = cart.find(item => item.id === productId);

    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({ ...product, quantity: 1 });
    }

    // "ë‹´ê¸° ì™„ë£Œ" í† ìŠ¤íŠ¸ ì•Œë¦¼ ë„ìš°ê¸°
    showToast('âœ… ë‹´ê¸° ì™„ë£Œ');

    // ìƒí’ˆ ì´ëª¨ì§€ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
    animateToCart(event.target, product.emoji);
}

// ì¥ë°”êµ¬ë‹ˆ UI ì—…ë°ì´íŠ¸
function updateCartDisplay() {
    const cartCount = document.getElementById('cart-count');
    const cartItems = document.getElementById('cart-items');
    const cartTotal = document.getElementById('cart-total');
    const orderBtn = document.getElementById('order-btn');
    
    const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);
    cartCount.textContent = totalQuantity;
    
    if (cart.length === 0) {
        cartItems.innerHTML = '<p style="text-align: center; padding: 2rem; color: #666;">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.</p>';
        cartTotal.classList.add('hidden');
        orderBtn.style.display = 'none';
        return;
    }
    
    cartItems.innerHTML = '';
    let total = 0;
    
    cart.forEach(item => {
        const itemElement = document.createElement('div');
        itemElement.className = 'cart-item';
        itemElement.innerHTML = `
            <div>
                <strong>${item.name}</strong><br>
                <span style="color: #666;">${item.price.toLocaleString()}ì› Ã— ${item.quantity}ê°œ</span>
            </div>
            <div>
                <button onclick="changeQuantity(${item.id}, -1)" style="background: #ddd; border: none; padding: 5px 10px; margin-right: 10px; border-radius: 5px;">-</button>
                <button onclick="changeQuantity(${item.id}, 1)" style="background: #74b9ff; color: white; border: none; padding: 5px 10px; margin-right: 10px; border-radius: 5px;">+</button>
                <button onclick="removeFromCart(${item.id})" style="background: #fd79a8; color: white; border: none; padding: 5px 10px; border-radius: 5px;">ì‚­ì œ</button>
            </div>
        `;
        cartItems.appendChild(itemElement);
        total += item.price * item.quantity;
    });
    
    document.getElementById('total-amount').textContent = total.toLocaleString();
    cartTotal.classList.remove('hidden');
    orderBtn.style.display = 'block';
}

// ìˆ˜ëŸ‰ ë³€ê²½
function changeQuantity(productId, change) {
    const item = cart.find(item => item.id === productId);
    if (item) {
        item.quantity += change;
        if (item.quantity <= 0) {
            removeFromCart(productId);
        } else {
            updateCartDisplay();
        }
    }
}

// ì¥ë°”êµ¬ë‹ˆì—ì„œ ìƒí’ˆ ì œê±°
function removeFromCart(productId) {
    cart = cart.filter(item => item.id !== productId);
    updateCartDisplay();
}

// ì„¹ì…˜ í‘œì‹œ/ìˆ¨ê¹€ ê´€ë¦¬
function showSection(sectionId) {
    const sections = ['products-section', 'cart-section', 'order-section', 'payment-section', 'success-section'];
    sections.forEach(id => document.getElementById(id).classList.add('hidden'));
    document.getElementById(sectionId).classList.remove('hidden');
}

// í™”ë©´ ì „í™˜ í•¨ìˆ˜ë“¤
function showProducts() {
    showSection('products-section');
}

function showCart() {
    showSection('cart-section');
}

function showOrderForm() {
    if (cart.length === 0) {
        alert('ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.');
        return;
    }
    showSection('order-section');
}

// ê²°ì œ ë°©ë²• ì„ íƒ
function selectPayment(method) {
    selectedPayment = method;
    document.querySelectorAll('.payment-method').forEach(el => el.classList.remove('selected'));
    const btns = document.querySelectorAll(`.payment-method`);
    btns.forEach(btn => {
        if(btn.dataset.method === method) btn.classList.add('selected');
    });
}

// íŒŒì¼ì„ Base64ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜ (Promise ë°˜í™˜)
function fileToBase64(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result.split(',')[1]); // base64ë§Œ ë°˜í™˜
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

// ì£¼ë¬¸ í¼ ì œì¶œ (async/await)
document.getElementById('order-form').addEventListener('submit', async function(e) {
    e.preventDefault();

    const depositorName = document.getElementById('depositor-name').value.trim();
    const receiptFile = document.getElementById('receipt-upload').files[0];

    let base64File = null;
    let fileName = '';
    let fileType = '';

    if (receiptFile) {
        base64File = await fileToBase64(receiptFile);
        fileName = receiptFile.name;
        fileType = receiptFile.type;
    }

    orderData = {
        name: document.getElementById('customer-name').value.trim(),
        phone: document.getElementById('customer-phone').value.trim(),
        address: document.getElementById('customer-address').value.trim(),
        payment: selectedPayment,
        items: [...cart],
        total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
        depositorName: depositorName || '',
        receiptFile: {
            name: fileName,
            type: fileType,
            data: base64File
        }
    };

    if (!orderData.name || !orderData.phone || !orderData.address) {
        alert('ì´ë¦„, ì „í™”ë²ˆí˜¸, ì£¼ì†Œë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
    }

    if (selectedPayment === 'bank') {
        document.getElementById('payment-amount').textContent = orderData.total.toLocaleString();
        showSection('payment-section');
    } else {
        completeOrder();
    }
});

// íŒŒì¼ ì—…ë¡œë“œ ë¯¸ë¦¬ë³´ê¸° ë° ì²˜ë¦¬
function handleFileUpload(event) {
    const file = event.target.files[0];
    if (!file) return;
    const preview = document.getElementById('upload-preview');
    preview.innerHTML = '';
    
    if (file.type.startsWith('image/')) {
        const img = document.createElement('img');
        img.src = URL.createObjectURL(file);
        img.style.maxWidth = '100px';
        img.style.maxHeight = '100px';
        preview.appendChild(img);
    } else {
        preview.textContent = `${file.name} ì—…ë¡œë“œ ì™„ë£Œ`;
    }
}

// ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì˜ì—­ ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸
function setupDragAndDrop() {
    const dropArea = document.getElementById('receipt-drop-area');
    const fileInput = document.getElementById('receipt-upload');

    dropArea.addEventListener('dragover', e => {
        e.preventDefault();
        dropArea.style.borderColor = '#0984e3';
        dropArea.style.backgroundColor = '#dfe6e9';
    });

    dropArea.addEventListener('dragleave', e => {
        e.preventDefault();
        dropArea.style.borderColor = '#ccc';
        dropArea.style.backgroundColor = '';
    });

    dropArea.addEventListener('drop', e => {
        e.preventDefault();
        dropArea.style.borderColor = '#ccc';
        dropArea.style.backgroundColor = '';
        if (e.dataTransfer.files.length > 0) {
            fileInput.files = e.dataTransfer.files;
            handleFileUpload({ target: fileInput });
        }
    });

    fileInput.addEventListener('change', handleFileUpload);
}

function addToCart(productId, event) {
    const product = products.find(p => p.id === productId);
    const existingItem = cart.find(item => item.id === productId);

    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({ ...product, quantity: 1 });
    }

    // "ë‹´ê¸° ì™„ë£Œ" í† ìŠ¤íŠ¸ ì•Œë¦¼ ë„ìš°ê¸°
    showToast('âœ… ë‹´ê¸° ì™„ë£Œ');

    // ìƒí’ˆ ì´ëª¨ì§€ ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
    animateToCart(event.target, product.emoji);
}


// ê²°ì œ ì™„ë£Œ ì²˜ë¦¬
function completeOrder() {
    // ì„œë²„ì— ì£¼ë¬¸ ë°ì´í„° ì „ì†¡ ë¶€ë¶„ì€ ìƒëµ (ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œ êµ¬í˜„)
    cart = [];
    updateCartDisplay();
    showSection('success-section');
}

// ì£¼ë¬¸ ì„±ê³µ í›„ ë‹¤ì‹œ ì‡¼í•‘ìœ¼ë¡œ
function continueShopping() {
    showProducts();
}

// ì´ˆê¸° ì¥ë°”êµ¬ë‹ˆ ìˆ˜ëŸ‰, ì„¹ì…˜ ìƒíƒœ ë“± ìœ ì§€ ê´€ë¦¬ëŠ” ìœ„ í•¨ìˆ˜ë“¤ì´ ë‹´ë‹¹

    </script>
</body>
</html>
